function getCookie(e){if(!e)return;const t=document.cookie.split(";").find((t=>t.trim().startsWith(`${e}=`)))?.split("=").slice(1).join("=");return t?decodeURIComponent(t):void 0}function setCookie(e,t,n={}){const i={path:"/",...n};n.expires instanceof Date&&(i.expires=n.expires.toUTCString());let r=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;Object.keys(i).forEach((e=>{r+=`; ${e}`,r+=`=${i[e]}`})),document.cookie=r}function deleteCookie(e){setCookie(e,"",{"max-age":-1})}function ensureTurnstile(){if("unloaded"===window.turnstileState){window.turnstileState="loading",window[TURNSTILE_LOAD_FUNCTION]=()=>{turnstileLoad.resolve(),window.turnstileState="ready",document.dispatchEvent(new CustomEvent("turnstile_ready")),customTurnstileStyle(),delete window[TURNSTILE_LOAD_FUNCTION]};const e=`${TURNSTILE_SRC}?onload=${TURNSTILE_LOAD_FUNCTION}&render=explicit`,t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("error",(()=>{turnstileLoad.reject("Failed to load Turnstile."),delete window[TURNSTILE_LOAD_FUNCTION]})),document.head.appendChild(t)}return turnstileLoadPromise}function loadTurnstileScript(e){ensureTurnstile().then((()=>{e&&e()}))}function loadTurnstileOnFirstInteraction(){function e(){Array.from(document.getElementsByClassName("eager-load-turnstile")).forEach((e=>{const t=e.closest("form");t&&(e.id=`${t.id}-cf-turnstile`,isTurnstileWidgetRendered(`#${e.id}`)||renderTurnstileWidget(e.id))}))}function t(){"unloaded"===window.turnstileState&&(loadTurnstileScript(e),window.removeEventListener("mousemove",t),window.removeEventListener("click",t),window.removeEventListener("scroll",t),window.removeEventListener("touchstart",t),window.removeEventListener("bypass_turnstile_optimisation",t))}window.addEventListener("mousemove",t),window.addEventListener("click",t),window.addEventListener("scroll",t),window.addEventListener("touchstart",t),window.addEventListener("bypass_turnstile_optimisation",t)}function trackTurnstile({stage:e,status:t,message:n=""}){if(window.GTMtracker){const i=e.replace("-cf-turnstile","");window.GTMtracker.trackEvent("formSubmitStatusFormatter",{stage:i,status:t,message:n})}}function turnstileDefaultCallback(e){trackTurnstile({stage:e,status:!0,message:"Verified Turnstile"})}function toggleSubmitButton(e,t=!1){const n=e.replace("-cf-turnstile",""),i=document.getElementById(n)?.querySelector(".turnstile-form");t?i?.classList.add("disable-turnstile-form-button"):i?.classList.remove("disable-turnstile-form-button")}function toggleInteractionOnlyHeight(e,t=!0){document.querySelector(e)?.classList.toggle("interaction-only-turnstile",t)}function customWidgetAttributes(e){const t=document.getElementById(e),n={};return t&&CUSTOM_WIDGET_ATTRIBUTES.forEach((e=>{const i=t.getAttribute(`data-turnstile-${e}`);i&&(n[e]=i)})),n}function renderTurnstileWidget(e,{appearance:t="interaction-only",theme:n="light",callbackFn:i=null,submitButtonToggle:r=!1}={}){const s=`#${e}`,o={sitekey:window.turnstileConfig.siteKey,appearance:t,theme:n,callback:()=>{r&&toggleSubmitButton(e)},"expired-callback":()=>{window.turnstile.reset(s),r&&toggleSubmitButton(e,!0)},"error-callback":()=>{window.turnstile.reset(s),r&&toggleSubmitButton(e,!0)},...customWidgetAttributes(e)};i&&(o.callback=i),toggleInteractionOnlyHeight(s,"interaction-only"===t),window.turnstile?.render(s,o)}function renderVisibleTurnstile(e){window.turnstile?.remove(`#${e}`),window.visibleTurnstileIds.push(e),renderTurnstileWidget(e,{appearance:"always",submitButtonToggle:!0,callbackFn:()=>{toggleSubmitButton(e)}})}function fallbackVisibleTurnstile(e){const t=`${e}-cf-turnstile`,n=document.getElementById(e)?.querySelector(`#${t}`);n&&(renderVisibleTurnstile(t),trackTurnstile({stage:e,status:!0,message:"Rendering visible fallback turnstile"}))}function customTurnstileStyle(){const e=document.createElement("style");e.innerHTML="\n        .disable-turnstile-form-button {\n            pointer-events: none;\n            cursor: not-allowed;\n        }\n\n        .interaction-only-turnstile {\n            width: fit-content;\n            height: auto;\n            display: flex;\n        }\n    ",document.head.appendChild(e)}function loadTurnstileWithScript(e,t){loadTurnstileScript((()=>{renderTurnstileWidget(e,t),trackTurnstile({stage:e,status:!0,message:"Rendering interaction-only turnstile with script"})}))}function isTurnstileWidgetRendered(e){try{window.turnstile?.getResponse(e);return!0}catch(e){return!1}}function isTurnstileWidgetResponseValid(e){try{const t=window.turnstile?.getResponse(e);return!!t}catch(e){return!1}}function loadTurnstileWithoutScript(e,t){isTurnstileWidgetRendered(`#${e}`)||(renderTurnstileWidget(e,t),trackTurnstile({stage:e,status:!0,message:"Rendering interaction-only turnstile"}))}function loadTurnstile(e,t={}){"unloaded"===window.turnstileState?loadTurnstileWithScript(e,t):loadTurnstileWithoutScript(e,t)}function trackTurnstileServerAnalytics(){const e=getCookie("cf_turnstile_analytics");if(e&&window.GTMtracker){JSON.parse(e).forEach((e=>{const t=JSON.parse(e),{event:n,action:i,data:r,label:s}=t,o=window.GTMtracker.getGTMEventData(n,i,r,s);window.GTMtracker.clearAttributes(),window.TrackingHelper?.pushToGTM(o)})),deleteCookie("cf_turnstile_analytics")}}function resetTurnstile({id:e,trackTurnstileResponse:t=!1}){const n=`#${e}`;e&&isTurnstileWidgetResponseValid(n)&&window.turnstile.reset(n),window.visibleTurnstileIds.includes(e)&&toggleSubmitButton(e,!0),t&&trackTurnstileServerAnalytics()}function initialiseTurnstile(){Array.from(document.getElementsByClassName("lazy-cf-turnstile")).forEach((e=>{const t=e.closest("form");t&&(e.id=`${t.id}-cf-turnstile`,t.addEventListener("click",(()=>loadTurnstile(e.id)),{once:!0}))}))}function initializeTurnstileClickListeners(){Array.from(document.getElementsByClassName("turnstile-form")).forEach((e=>{e.addEventListener("click",(t=>{const n=e.closest("form");if(!n)return;if(isTurnstileWidgetResponseValid(`#${n.id}-cf-turnstile`)){const e=new Event("recaptcha-loaded");document.dispatchEvent(e,{bubbles:!0})}else t.preventDefault(),t.stopPropagation(),renderVisibleTurnstile(`${n.id}-cf-turnstile`),trackTurnstile({stage:`${n.id}-cf-turnstile`,status:!0,message:"Rendering visible turnstile"})}))}))}function removeFormTurnstile(e){e&&window.turnstile?.remove(`#${e}-cf-turnstile`)}let turnstileLoad;window.visibleTurnstileIds=[],window.turnstileState="unloaded";const CUSTOM_WIDGET_ATTRIBUTES=["appearance"],TURNSTILE_LOAD_FUNCTION="cf__TurnstileOnLoad",TURNSTILE_SRC="https://challenges.cloudflare.com/turnstile/v0/api.js",turnstileLoadPromise=new Promise(((e,t)=>{turnstileLoad={resolve:e,reject:t},"ready"===window.turnstileState&&e()}));window.fallbackVisibleTurnstile=fallbackVisibleTurnstile,window.removeFormTurnstile=removeFormTurnstile,window.loadTurnstile=loadTurnstile,window.addEventListener("load",initialiseTurnstile),window.addEventListener("load",initializeTurnstileClickListeners),window.addEventListener("load",loadTurnstileOnFirstInteraction),document.addEventListener("reset-turnstile",(e=>resetTurnstile(e.detail)));